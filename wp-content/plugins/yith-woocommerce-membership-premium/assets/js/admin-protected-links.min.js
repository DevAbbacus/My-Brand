jQuery(function(e){var i,n,t,c,l,d,o,a,s,m=(t=e(".yith-wcmbs-admin-protected-link__id"),c=[],t.each(function(){c.push(parseInt(e(this).val(),10))}),Math.max.apply(null,c)),p=wp.template("yith-wcmbs-admin-protected-links"),r=e(".yith-wcmbs-admin-protected-links"),_=e("#yith-wcmbs-admin-protected-links__add-link");_.on("click",function(){var t=e(p({index:++m}));t.find(".select2").remove(),t.find(".yith-wcmbs-select2").select2(),r.append(t)}),e(document).on("click",".yith-wcmbs-admin-protected-link__action__delete",function(t){e(t.target).closest(".yith-wcmbs-admin-protected-link").remove(),e(".yith-wcmbs-admin-protected-link").length||_.click()}),e(document).on("click",".yith-wcmbs-admin-protected-link__upload",function(){var t=e(this).closest(".yith-wcmbs-admin-protected-link");n=t.find(".yith-wcmbs-admin-protected-link__url-field"),i||((i=wp.media({title:yith_wcmbs_protected_links_params.i18n.uploadFileTitle,button:{text:yith_wcmbs_protected_links_params.i18n.uploadFileButtonText},multiple:!1})).on("select",function(){var t=i.state().get("selection").first().toJSON().url;n.val(t)}),i.on("ready",function(){i.uploader.options.uploader.params={type:"membership_protected_link"}})),i.open()}),o=e(".yith-wcmbs-admin-protected-link").first(),a=o.find(".yith-wcmbs-admin-protected-link__name-field"),s=o.find(".yith-wcmbs-admin-protected-link__url-field"),a&&a.val()&&s&&s.val()||(d=(l=e("#_protected-files-enabled")).closest(".yith-plugin-fw-onoff-container").find(".yith-plugin-fw-onoff"),l.is(":checked")&&d.click())});