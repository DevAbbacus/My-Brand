!function(u){u.fn.yith_trigger_multiple=function(i){return this.each(function(){var t=u(this);u.each(i,function(i,e){t.trigger(e)})})};var f=u("body"),g=u("html"),i=u(yith_wcms.dom.login),v=u(yith_wcms.dom.billing),k=u(yith_wcms.dom.shipping),b=u(yith_wcms.dom.order),e=u(yith_wcms.dom.payment),x=u(yith_wcms.dom.form_actions),C=u(yith_wcms.dom.coupon),q=u(yith_wcms.dom.create_account),O=u(yith_wcms.dom.create_account_wrapper),I=(u(yith_wcms.dom.account_password),u(yith_wcms.dom.shipping_check)),j=u(yith_wcms.dom.button_back_to_cart),U=1==yith_wcms.merge_order_info_payment?"order":"payment";$body_width=function(){return f.width()},steps={login:i,billing:v,shipping:k,order:b,payment:e},is_user_logged_in=f.hasClass("logged-in"),cookie={form:"yith_wcms_checkout_form",step:"yith_wcms_checkout_current_step"},get_prev_and_next_step=function(i){return yith_wcms.steps_timeline[i]},check_create_account_fields=function(t,i,e){return 0==i.length||i.is(":checked")||0==t||(t-=e.find(".validate-required").length,yith_wcms.wp_gdpr.is_enabled&&1==yith_wcms.wp_gdpr.add_consent_on_checkout&&(t=invalid_field+yith_wcms.wp_gdpr.consents_number)),0!=i.length&&i.is(":checked")&&yith_wcms.wp_gdpr.is_enabled&&1==yith_wcms.wp_gdpr.add_consent_on_checkout&&u.each(yith_wcms.wp_gdpr.consents,function(i,e){consent="#user_consents_"+i,u(consent).is(":checked")||(t+=1)}),t},is_mobile=function(){return $body_width()<yith_wcms.max_mobile_width&&1==yith_wcms.have_mobile_timeline},mobile_style=function(){var o,i;is_mobile()&&(u(yith_wcms.dom.checkout_timeline).prependTo(u(yith_wcms.dom.checkout_form)),o=u(yith_wcms.dom.checkout_timeline),u.each(steps,function(i,e){var t,n=o.addClass("yith-is-mobile").find(yith_wcms.dom.timeline_id_prefix+i);0!=n.length&&(t=yith_wcms.dom.timeline_id_prefix+i+"-content",n.after('<li class="yith-timeline-step-mobile-content '+i+'" id="'+t.replace("#","")+'"></li>'),steps[i].appendTo(u(t)))}),i=o.find("li.active").data("step"),u(yith_wcms.dom.timeline_id_prefix+i+"-content").append(x))},u(window).on("yith_wcms_init",mobile_style),f.on("updated_checkout yith_wcms_myaccount_order_pay",function(i){"updated_checkout"==i.type&&(steps.payment=u(yith_wcms.dom.payment)),"payment"==x.data("step")&&u(yith_wcms.dom.payment).show(),f.trigger("yith_wcms_updated_checkout")}),f.hasClass("woocommerce-order-pay")&&f.trigger("yith_wcms_myaccount_order_pay"),"yes"==yith_wcms.live_fields_validation&&(u(yith_wcms.dom.checkout_form),f.on("blur","input:radio",function(){var i=u(this),e=i.closest(".form-row"),t=!0;e.is(".validate-required")&&("radio"==i.attr("type")&&(i=i.attr("name"),u("input[name="+i+"]").is(":checked")||(e.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),t=!1)),t&&e.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated"))})),f.on("yith_wcms_select2",function(i){var e;u().select2&&((e=function(){u("select.country_select, select.state_select").each(function(){var i={placeholder:u(this).attr("placeholder"),placeholderOption:"first",width:"100%"};u(this).select2(i)})})(),f.bind("country_to_state_changed",function(){e()}))}),1!=yith_wcms.wc_shipping_multiple&&f.trigger("yith_wcms_select2"),u(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li").on("click",function(i){i.preventDefault();var e=u(this);if(e.hasClass("active"))return!1;var t=u(yith_wcms.dom.checkout_timeline).find(yith_wcms.dom.active_timeline).data("step"),n=e.data("step"),o=get_prev_and_next_step(n),i=!1!==o.prev?get_prev_and_next_step(o.prev):get_prev_and_next_step(o.next),e=i.next,o=i.prev,i=null;if(e==n?i=x.find(yith_wcms.dom.button_next):o==n&&(i=x.find(yith_wcms.dom.button_prev)),"login"==t&&is_user_logged_in||null==i)return!1;c(i,t,e,o)}),x.find(yith_wcms.dom.button_prev).add(yith_wcms.dom.button_next).on("click",function(i){var e=u(this),t=x.data("step"),n=get_prev_and_next_step(t),o=n.next,n=n.prev;c(e,t,o,n)});var c=function(i,e,t,n){var o=u(yith_wcms.dom.checkout_timeline),c=i.data("action"),s=x.find(yith_wcms.dom.button_prev),_=x.find(yith_wcms.dom.button_next),d=o.find(".active").data("step"),a=u(yith_wcms.dom.checkout_form);"prev"==c&&_.removeClass("disabled").removeAttr("disabled"),"yes"==yith_wcms.is_scroll_top_enabled&&(r=(p=u(yith_wcms.dom.scroll_top_anchor)).offset().top-p.outerHeight(!0),g.add(f).animate({scrollTop:r},500));var m=function(i){"order"==i||u(document).triggerHandler("yith_wmcs_show_coupon",i)?C.fadeIn(yith_wcms.transition_duration):C.fadeOut(yith_wcms.transition_duration)};if("yes"==yith_wcms.live_fields_validation){i="login"==d||"billing"==d||"shipping"==d;if(yith_wcms.is_delivery_date_enabled&&(i=i||"order"==d),i&&"next"==c){var r,l,h,a=u(yith_wcms.dom.checkout_form),p=0;if(("billing"==d||"shipping"==d||yith_wcms.is_delivery_date_enabled&&"order"==d)&&a.find(yith_wcms.dom.required_fields_check).yith_trigger_multiple(yith_wcms.validate_checkout_event),"billing"!=d&&"login"!=d||(!yith_wcms.is_coupon_email_system_enabled||void 0!==(h=u(yith_wcms.dom.day_of_birth))&&(r=h.attr("pattern"),i=new RegExp("^"+r+"$","g"),""!=(r=h.val())&&0==i.test(r)&&h.parent().removeClass("woocommerce-validated").addClass("woocommerce-invalid-required-field").addClass("woocommerce-invalid")),void 0!==(h=u(yith_wcms.dom.email))&&h.hasClass("woocommerce-invalid-email")&&h.addClass("woocommerce-invalid-required-field"),invalid_field_obj=v.find(yith_wcms.dom.wc_invalid_required).not(".ywsfd-validate-required"),1==yith_wcms.extra_brazil_checkout_fields_for_wc.is_enabled&&(l=yith_wcms.extra_brazil_checkout_fields_for_wc.billing,u(l.check).val()==l.value&&(invalid_field_obj=u.grep(invalid_field_obj,function(i){return-1==u.inArray(u(i).attr("id"),l.skip_to_check)}))),p=invalid_field_obj.length,1!=yith_wcms.merge_billing_shipping&&(p=check_create_account_fields(p,q,O))),"shipping"!=d&&1!=yith_wcms.merge_billing_shipping||((0!=(h=I.length)&&I.is(":checked")||0==h&&k.find("input").length)&&(p=k.find(yith_wcms.dom.wc_invalid_required).not(".ywsfd-validate-required").length),1==yith_wcms.merge_billing_shipping&&0!=h&&!1===I.is(":checked")&&(p-=k.find(yith_wcms.dom.shipping_under_billing_step).find(yith_wcms.dom.wc_invalid_required).not(".ywsfd-validate-required").length),1==yith_wcms.merge_billing_shipping&&(p=check_create_account_fields(p,q,O)),yith_wcms.is_wc_checkout_addons_enabled&&(p+=u(yith_wcms.dom.wc_checkout_addons).find(yith_wcms.dom.wc_invalid_required).length),p+=k.find(yith_wcms.dom.additional_fields).find(">"+yith_wcms.dom.wc_invalid_required).length),yith_wcms.is_delivery_date_enabled&&"order"==d&&(p=b.find(yith_wcms.dom.wc_invalid_required).length),0!=p){if("login"!=d)return _.addClass("disabled").attr("disabled",!0),!1;t="billing"}}}o.find(".active").removeClass("active"),"next"==c?(x.data("step",t),w=u(yith_wcms.dom.timeline_id_prefix+t),is_mobile()?steps[e].slideUp(yith_wcms.transition_duration,function(){steps[t].slideDown(yith_wcms.transition_duration,function(){u(yith_wcms.dom.timeline_id_prefix+d.data("step")+"-content").first().append(x)}),u(yith_wcms.dom.timeline_id_prefix+d.data("step")+"-content").first().append(x),m(t)}):steps[e].fadeOut(yith_wcms.transition_duration,function(){steps[t].fadeIn(yith_wcms.transition_duration),m(t)}),w.toggleClass("active")):"prev"==c&&(y=u(yith_wcms.dom.timeline_id_prefix+n),x.data("step",n),is_mobile()?steps[e].slideUp(yith_wcms.transition_duration,function(){steps[n].slideDown(yith_wcms.transition_duration,function(){u(yith_wcms.dom.timeline_id_prefix+d.data("step")+"-content").append(x)})}):steps[e].fadeOut(yith_wcms.transition_duration,function(){steps[n].fadeIn(yith_wcms.transition_duration)}),m(n),y.toggleClass("active")),e=x.data("step");var w=u(yith_wcms.dom.checkout_timeline),y=(d=w.find("li.active")).index(),y=w.find("li").filter(":lt("+y+")").filter(":not(.active)");w.find("li.done").removeClass("done"),y.addClass("done"),1==yith_wcms.use_cookie&&Cookies.set(cookie.step,e,{path:"/"}),!0==("prev"==c&&!1===yith_wcms.steps_timeline[n][c]&&"login"==n)?_.val(yith_wcms.skip_login_label):_.val(yith_wcms.next_label);w=!1,y=!1;"next"==c&&!1===yith_wcms.steps_timeline[t][c]&&(y=!0),"prev"==c&&!1===yith_wcms.steps_timeline[n][c]&&(w=!0),!0===w?s.fadeOut(yith_wcms.transition_duration):s.fadeIn(yith_wcms.transition_duration).css("display","inline-block"),!0===y?_.fadeOut(yith_wcms.transition_duration):_.fadeIn(yith_wcms.transition_duration).css("display","inline-block"),e==U?(a.removeClass("processing"),"yes"==yith_wcms.disabled_prev_button&&s.fadeOut(yith_wcms.transition_duration),"yes"==yith_wcms.disabled_back_to_cart_button&&j.fadeOut(yith_wcms.transition_duration)):(a.addClass("processing"),"yes"==yith_wcms.disabled_back_to_cart_button&&j.fadeIn(yith_wcms.transition_duration)),f.trigger("yith_wcms_step_changed",yith_wcms)},t=x.find(yith_wcms.dom.button_next);u(document).on("blur click change",yith_wcms.dom.billing+" .validate-required input, "+yith_wcms.dom.billing+" .validate-required textarea, "+yith_wcms.dom.create_account,function(i){var e=v.find(yith_wcms.dom.wc_invalid_required).length;0!=(e=check_create_account_fields(e,q,O))&&"login"!=u(yith_wcms.dom.checkout_timeline).find(".active").data("step")?t.addClass("disabled").attr("disabled",!0):t.removeClass("disabled").removeAttr("disabled")}),u(document).on("blur click change",yith_wcms.dom.shipping+" .validate-required input, "+yith_wcms.dom.shipping+" .validate-required textarea, "+yith_wcms.dom.shipping_check+", "+yith_wcms.extra_brazil_checkout_fields_for_wc.billing.check,function(i){I.is(":checked")&&0!=k.find(yith_wcms.dom.wc_invalid_required).length?t.addClass("disabled").attr("disabled",!0):t.removeClass("disabled").removeAttr("disabled")});var e=Cookies.get(cookie.form),n=(Cookies.get(cookie.step),function(){var i=u(".checkout.woocommerce-checkout"),e=i.serialize(),t="";i.find(":checkbox:not(:checked)").each(function(){t=t+"&"+u(this).attr("name")+"=0"}),e+=t,Cookies.set(cookie.form,e,{path:"/"})}),o=function(){I.find("input").on("change",function(i){n()}),u(yith_wcms.dom.checkout_form).find(yith_wcms.dom.required_fields_check).add(yith_wcms.dom.shipping_check).on("blur change",function(i){n()})};1==yith_wcms.use_cookie&&(o(),function(i){if(void 0!==i){var e,t=i.split("&");for(e in t){var n,o,c,s=t[e];"string"==typeof s&&(n=s.split("="),o=decodeURIComponent(':input[name="'+n[0]+'"]'),void 0!==(s=u(o))&&(o=decodeURIComponent(n[1]).replace(/\+/g," "),-1!=yith_wcms.dom.select2_fields.indexOf(n[0])?((c=u("#"+decodeURIComponent(n[0]))).add(s).val(o),c.is("select")?c.val(o).trigger("change"):c.is("input")&&s.val(o)):(c=!1,-1!=n[0].indexOf("payment_method")&&1==yith_wcms.skip_payment_method&&(c=!0),-1!=n[0].indexOf("shipping_method")&&1==yith_wcms.skip_shipping_method&&(c=!0),-1==n[0].indexOf("_wp")&&o&&0==c&&("checkbox"==s.prop("type")?s.prop("checked",1==o):s.val(o)))))}}}(e),f.on("country_to_state_changed",function(i,e,t){o()})),void 0!==Cookies.get(cookie.step)&&1==yith_wcms.use_cookie&&f.on("updated_checkout yith_wcms_myaccount_order_pay",function(){u(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li#timeline-"+Cookies.get(cookie.step)).trigger("click")}),1==yith_wcms.is_order_received_endpoint&&1==yith_wcms.use_cookie&&(Cookies.remove(cookie.form,{path:"/"}),Cookies.remove(cookie.step,{path:"/"})),f.trigger("yith_wcms_init")}(jQuery);